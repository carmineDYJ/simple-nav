{"version":3,"sources":["main.js"],"names":["x","localStorage","getItem","searchEngine","$","html","xObject","JSON","parse","hashMap","length","logo","logoType","url","$siteList","$lastLi","find","simplifyUrl","replace","urlAlreadyExist","indexSkipped","i","undefined","render","remove","forEach","node","index","$li","insertBefore","on","e","preventDefault","splice","newUrl","window","prompt","indexOf","alert","newLogo","setSearchEngine","attr","push","document","key","submit","layui","use","dropdown","elem","data","title","href","id","click","obj","onbeforeunload","string","stringify","setItem","text","trim"],"mappings":"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","file":"main.40c3599b.js","sourceRoot":"../src","sourcesContent":["const x = localStorage.getItem('x');\nconst searchEngine = localStorage.getItem('searchEngine') === null ? '百度' : localStorage.getItem('searchEngine');\n$(\"#searchEngine\").html(searchEngine + ' <i class=\"layui-icon layui-icon-down layui-font-12\"></i>');\nconst xObject = JSON.parse(x);\nconst hashMap = (xObject !== null && xObject.length !== 0) ? xObject : [\n    { logo: 'm', logoType: 'text', url: 'https://developer.mozilla.org' },\n    { logo: 'c', logoType: 'text', url: 'https://css-tricks.com' },\n    { logo: 'j', logoType: 'text', url: 'https://zh.javascript.info' },\n];\nconst $siteList = $('.siteList');\nconst $lastLi = $siteList.find('li.last');\nconst simplifyUrl = (url) => {\n    return url.replace('https://', '')\n        .replace('http://', '')\n        .replace('www.', '')\n        .replace(/\\/.*/, '');\n};\nconst urlAlreadyExist = (url, indexSkipped) => {\n    for (let i = 0; i < hashMap.length; i++) {\n        if (indexSkipped !== undefined && indexSkipped === i) {\n            continue;\n        }\n        if (hashMap[i].url === url) {\n            return true;\n        }\n    }\n    return false;\n}\nconst render = () => {\n    $siteList.find('li:not(.last)').remove();\n    hashMap.forEach((node, index) => {\n        const $li = $(`\n        <li>\n            <a href=\"${node.url}\">\n                <div class=\"site\">\n                    <div class=\"logo\">${node.logo}</div>\n                    <div class=\"link\">${simplifyUrl(node.url)}</div>\n                    <div class=\"edit\">\n                        <svg class=\"icon\">\n                            <use xlink:href=\"#icon-editor\"></use>\n                        </svg>\n                    </div>\n                    <div class=\"close\">\n                        <svg class=\"icon\">\n                            <use xlink:href=\"#icon-searchClose\"></use>\n                        </svg>\n                    </div>\n                    <div class=\"left\">\n                        <svg class=\"icon\">\n                            <use xlink:href=\"#icon-left\"></use>\n                        </svg>\n                    </div>\n                    <div class=\"right\">\n                        <svg class=\"icon\">\n                            <use xlink:href=\"#icon-right\"></use>\n                        </svg>\n                    </div>\n                </div>\n            </a>\n        </li>\n        `).insertBefore($lastLi);\n        $li.on('click', '.close', (e) => {\n            e.preventDefault();\n            hashMap.splice(index, 1);\n            render();\n        });\n        $li.on('click', '.edit', (e) => {\n            e.preventDefault();\n            let newUrl = window.prompt(\"请输入你想要更新该链接为：\", hashMap[index].url);\n            while (newUrl === '') {\n                newUrl = window.prompt('请输入你想要更新该链接为(不能为空)：');\n            }\n            if (newUrl !== null) {\n                if (newUrl.indexOf('http') !== 0) {\n                    newUrl = 'https://' + newUrl;\n                }\n                if (urlAlreadyExist(newUrl, index)) {\n                    window.alert('该链接已经存在');\n                } else {\n                    let newLogo = window.prompt(\"请输入该链接显示的logo为（可留空自动生成，仅一位有效）：\");\n                    if (newLogo === '') {\n                        newLogo = simplifyUrl(newUrl)[0];\n                    } else {\n                        newLogo = newLogo[0];\n                    }\n                    hashMap.splice(index, 1, { logo: newLogo, logoType: 'text', url: newUrl });\n                    render();\n                }\n            }\n        });\n        $li.on('click', '.left', (e) => {\n            e.preventDefault();\n            if (index !== 0 && hashMap.length !== 1) {\n                [hashMap[index], hashMap[index - 1]] = [hashMap[index - 1], hashMap[index]];\n            }\n            render();\n        });\n        $li.on('click', '.right', (e) => {\n            e.preventDefault();\n            if (index !== hashMap.length - 1 && hashMap.length !== 1) {\n                [hashMap[index], hashMap[index + 1]] = [hashMap[index + 1], hashMap[index]];\n            }\n            render();\n        });\n    });\n};\nconst setSearchEngine = (searchEngine) => {\n    if (searchEngine === '百度') {\n        $('.searchForm').attr('action', 'https://www.baidu.com/s');\n        $('.searchForm input').attr('name', 'wd');\n    } else if (searchEngine === '谷歌') {\n        $('.searchForm').attr('action', 'https://www.google.com/search');\n        $('.searchForm input').attr('name', 'q');\n    } else if (searchEngine === '必应') {\n        $('.searchForm').attr('action', 'https://cn.bing.com/search');\n        $('.searchForm input').attr('name', 'q');\n    }\n}\n\nsetSearchEngine(searchEngine);\nrender();\n\n$('.addButton').on('click', () => {\n    let url = window.prompt('请输入你想要添加的链接：');\n    while (url === '') {\n        url = window.prompt('请输入你想要添加的链接(不能为空)：');\n    }\n    if (url !== null) {\n        if (url.indexOf('http') !== 0) {\n            url = 'https://' + url;\n        }\n        if (urlAlreadyExist(url)) {\n            window.alert('该链接已经存在');\n        } else {\n            hashMap.push({ logo: simplifyUrl(url)[0], logoType: 'text', url: url });\n            $siteList.find('li:not(.last)').remove();\n            render();\n        }\n    }\n});\n\n$(document).on('keypress', (e) => {\n    const { key } = e;\n    if (key === 'Enter') {\n        $('.searchForm').submit();\n    }\n});\n\nlayui.use('dropdown', function () {\n    let dropdown = layui.dropdown;\n    dropdown.render({\n        elem: '#searchEngine'\n        , data: [\n            {\n                title: '百度',\n                href: '#'\n            },\n            {\n                title: '谷歌',\n                href: '#'\n            },\n            {\n                title: '必应',\n                href: '#'\n            },\n        ]\n        , id: 'searchEngine'\n        , click: function (obj) {\n            $(\"#searchEngine\").html(obj.title + ' <i class=\"layui-icon layui-icon-down layui-font-12\"></i>');\n            setSearchEngine(obj.title);\n        }\n    });\n});\n\nwindow.onbeforeunload = () => {\n    const string = JSON.stringify(hashMap);\n    localStorage.setItem('x', string);\n    localStorage.setItem('searchEngine', $(\"#searchEngine\").text().trim());\n};"]}